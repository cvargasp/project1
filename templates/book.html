{% extends "layout.html" %}

{% block title %}
    {{ book.title }}
{% endblock %}

{% block body %}
	<div class="container">
		<div class="row justify-content-center mt-5 text-center">
			<div class="col-7">
				<h2>{{ book.title }}</h2>
				<h5>{{ book.author }}<span> ({{ book.year }})</span></h5>
				<p>ISBN: {{ book.isbn }}<br>{{ rating_count }} ({{ work_ratings_count }})</p>
			</div>
		</div>
		{% if not previous_message %}
		<div class="row justify-content-center">
			<div class="col-7">
				<form action="{{ url_for('book', isbn=book.isbn) }}" method="post">
					<div>
						Rate this book
					</div>
				  	<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="ratingRadios" id="ratingRadios1" value="1">
						<label class="form-check-label" for="ratingRadios1"> 1 </label>
					</div>
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="ratingRadios" id="ratingRadios2" value="2">
						<label class="form-check-label" for="ratingRadios2"> 2 </label>
					</div>
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="ratingRadios" id="ratingRadios3" value="3">
						<label class="form-check-label" for="ratingRadios3"> 3 </label>
					</div>
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="ratingRadios" id="ratingRadios4" value="4">
						<label class="form-check-label" for="ratingRadios4"> 4 </label>
					</div>
					<div class="form-check form-check-inline">
						<input class="form-check-input" type="radio" name="ratingRadios" id="ratingRadios5" value="5">
						<label class="form-check-label" for="ratingRadios5"> 5 </label>
					</div>
					<div class="form-group mt-3">
					    <label for="reviewTextarea">Write your review</label>
					    <textarea class="form-control" id="reviewTextarea" name="reviewTextarea" rows="5"></textarea>
		  			</div>
		  			<div class="text-right">
		  				<button type="submit" class="btn btn-primary ">Submit</button>	  				
		  			</div>
				</form>			
			</div>		
		</div>
		{% endif %}
		<div class="row justify-content-center mt-4">
			{% for review in reviews %}
			<div class="col-7">
				<span><a>{{ review.name }}</a> rated in {{ review.rating }}</span>
				<p class="mt-2">{{ review.review }}</p>
				<hr>
			</div>
			{% endfor%}
		</div>
	</div>
{% endblock %}


<!--  SELECT * FROM reviews JOIN users_bookiview ON users_bookiview.id = reviews.user_id where reviews.book_id = book.id;
 SELECT users_bookiview.name FROM reviews JOIN users_bookiview ON users_bookiview.id = reviews.user_id where reviews.book_id = '7'; -->